<!DOCTYPE html>
<html lang="ar"  dir="rtl" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!--  <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/apple-icon.png">-->
  <link rel="icon" type="image/png" href="/assets/img/favicon.png">
  <title>
    إدارة الخدمات الفنية
  </title>
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <!-- Nucleo Icons -->
  <link href="/assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="/assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <!-- <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>-->
  <script src="/assets/js/fontawesome.js" crossorigin="anonymous"></script>
  <link href="/assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- CSS Files -->
  <link id="pagestyle" href="/assets/css/soft-ui-dashboard.css?v=1.0.3" rel="stylesheet" />

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta2/css/bootstrap-select.min.css" integrity="sha512-mR/b5Y7FRsKqrYZou7uysnOdCIJib/7r5QeJMFvLNHNhtye3xJp1TdJVPLtetkukFn227nKpXD9OjUc09lx97Q==" crossorigin="anonymous"
        referrerpolicy="no-referrer" />










  <script src="/assets/js/jquery-1.7.1.min.js"></script>
  <script type="text/javascript">
$(document).ready(function(){

	$('#gouvernorat').on('change', function(){
		var gouvernorat_id = $(this).val();

		$.ajax({
			type: 'GET',
			url: '/PvAccidentnew/loadDelegationByGouvernorat/' + gouvernorat_id,
			success: function(result) {
				var result = JSON.parse(result);
				var s = '<option value="">--من فضل إختر  المعتمدية--</option>';
				for(var i = 0; i < result.length; i++) {
					s += '<option value="' + result[i].delegationId + '">' + result[i].name + '</option>';
				}
				$('#gouvernorat1').empty();
				$('#gouvernorat1').html(s);
			}
		});
	});
		});
</script>


</head>

<body class="g-sidenav-show rtl bg-gray-100">
<aside class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-end me-3 rotate-caret" id="sidenav-main">

  <div th:replace="fragments/menu :: menu" />

</aside>

<main class="main-content position-relative max-height-vh-100 h-100 mt-1 ">
  <!-- Navbar -->

  <div th:replace="fragments/header :: header" />




  <div class="container my-3" >

    <div class="card">
      <div class="card-body">
        <div class="col-md-12">
          <form action="#" th:action="@{/PvAccidentnew/addSave1}" th:object="${pvAccident1}" method="post" enctype="multipart/form-data">
            <div class="row">

              <div class="card-header pb-0 text-left bg-transparent">
                <h3 class="font-weight-bolder text-info text-center"> محضر معاينة حادث مرور</h3>

              </div>



              <div class="row g-3">
                <div class="col-sm-7">
                  <label for="unite" class="col-form-label" >الوحدة</label>
                  <select id="unite" name="uniteId" class="form-control">
                    <option  th:each="un: ${unite}"
                             th:value="${un.id}"
                             th:text="${un.name}"
                             th:selected="(${un.id} == ${idUnite})"

                    />
                  </select>

                </div>

                <div class="col-sm">
                  <label for="dateimatric" class="col-form-label" id="dateimatric">تاريخ التسجيل </label>
                  <input type="date" th:field="*{dateimatric}" class="form-control"  placeholder="تاريخ التسجيل"/> <span th:if="${#fields.hasErrors('dateimatric')}" th:errors="*{dateimatric}" class="text-danger"></span>
                </div>

                <div class="col-sm">
                  <label for="numimatric" class="col-form-label"> رقم التسجيل </label>
                  <input type="text" th:field="*{numimatric}" class="form-control" placeholder="9990 تونس 230" id="numimatric" /> <span th:if="${#fields.hasErrors('numimatric')}" th:errors="*{numimatric}" class="text-danger"></span>
                </div>

                <div class="col-6">
                  <label for="numbarquia" class="col-form-label"> رقم البرقية </label>
                  <input type="text" th:field="*{numbarquia}" class="form-control" placeholder=" 9990 تونس 230" id="numbarquia" /> <span th:if="${#fields.hasErrors('numbarquia')}" th:errors="*{numbarquia}" class="text-danger"></span>
                </div>


                <div class="col-6">
                  <label for="dateaccid" class="col-form-label"> تاريخ الحادث </label>
                  <input type="date" th:field="*{dateaccid}" class="form-control" placeholder=" تاريخ الحادث  " id="dateaccid" /> <span th:if="${#fields.hasErrors('dateaccid')}" th:errors="*{dateaccid}" class="text-danger"></span>
                </div>

                <div class="card-body">
                  <h5 class="text"> مكان الحادث</h5>
                </div>

                <div class="col-sm-6">
                  <label for="gouvernorat" class="col-form-label"  >الولاية</label>
                  <select id="gouvernorat" name="gouvernoratId" class="form-control">
                    <option  th:each="gv: ${gouvernorat}"
                             th:value="${gv.id}"
                             th:text="${gv.name}"
                             th:selected="(${gv.id} == ${idGouvernorat})"

                    />
                  </select>

                </div>


                <div class="col-sm-6">
                  <label for="gouvernorat1" class="col-form-label"  >المعتمدية</label>
                  <select id="gouvernorat1" name="gouvernoratId1" class="form-control">
                    <option  th:each="gv: ${delegation}"
                             th:value="${gv.delegationId}"
                             th:text="${gv.name}"
                             th:selected="(${gv.delegationId} == ${idDelegation})"

                    />
                  </select>
                </div>

                <!--       <div class="col-sm-6">
                             <label for="delegation" class="col-form-label" >المعتمدية</label>
                             <select name="delegationId" class="form-control">
                                 <option  th:each="dg: ${delegation}" th:value="${dg.delegationId}" th:text="${dg.name}" id="delegation"/>
                             </select>
                         </div>-->

                <div class="col-sm-4">

                  <label for="addreaccid" class="col-form-label"> العنوان </label>
                  <input type="text" th:field="*{addreaccid}" class="form-control" id="addreaccid" placeholder="العنوان "/> <span th:if="${#fields.hasErrors('addreaccid')}" th:errors="*{addreaccid}" class="text-danger"></span>
                </div>

                <div class="col-sm-4">
                  <label for="pointKmaccid" class="col-form-label"> النقطة الكيلومترية </label>
                  <input type="text" th:field="*{pointKmaccid}" class="form-control" id="pointKmaccid" placeholder="النقطة الكيلومترية"/> <span th:if="${#fields.hasErrors('pointKmaccid')}" th:errors="*{pointKmaccid}" class="text-danger"></span>
                </div>


                <div class="col-sm-4">
                  <label for="signauxCirculation" class="col-form-label" >إشارات المرور</label>
                  <select id="signauxCirculation" name="signauxCirculationId" class="form-control">
                    <option  th:each="sg: ${signauxCirculation}"
                             th:value="${sg.signeId}"
                             th:text="${sg.name}"
                             th:selected="(${sg.signeId} == ${idSignauxCirculation})"

                    />
                  </select>
                </div>

                <div class="col-sm-4">
                  <label for="typeRoute" class="col-form-label" > نوع الطريق</label>
                  <select id="typeRoute" name="typeRouteId" class="form-control">
                    <option  th:each="tr: ${typeRoute}"
                             th:value="${tr.Id}"
                             th:text="${tr.name}"
                             th:selected="(${tr.Id} == ${idTypeRoute})"

                    />
                  </select>
                </div>

                <div class="col-sm-4">
                  <label for="situationRoute" class="col-form-label" > حالة الطريق</label>
                  <select id="situationRoute" name="situationRouteId" class="form-control">
                    <option  th:each="st: ${situationRoute}"
                             th:value="${st.Id}"
                             th:text="${st.name}"
                             th:selected="(${st.Id} == ${idSituationRoute})"

                    />
                  </select>
                </div>
                <div class="col-sm-4">
                  <label for="temps" class="col-form-label" >  الطقس</label>
                  <select id="temps" name="tempsId" class="form-control">
                    <option  th:each="t: ${temps}"
                             th:value="${t.Id}"
                             th:text="${t.name}"
                             th:selected="(${t.Id} == ${idTemps})"

                    />
                  </select>
                </div>


                <div class="card-body">
                  <h5 class="text"> أسباب الحادث</h5>
                </div>

                <div class="col-sm-6"     >
                  <label for="causeAccident" class="form-label select-label" >أسباب الحادث</label><br>
                  <select id="causeAccident" name="causeAccidentId" class="select" th:field="*{causeAccidents}" multiple >
                    <option  th:each="s: ${causeAccidents}"
                             th:value="${s.causeaccidentId}"
                             th:text="${s.name}"
                             th:selected="(${s.causeaccidentId} == ${idCauseAccidents})"

                    />
                  </select>
                </div>

                <div class="col-sm-6">

                  <label for="causePrincipale" class="col-form-label"> السبب الرئيسي للحادث </label>
                  <input type="text" th:field="*{causePrincipale}" class="form-control" id="causePrincipale" placeholder="السبب الرئيسي "/> <span th:if="${#fields.hasErrors('causePrincipale')}" th:errors="*{causePrincipale}" class="text-danger"></span>
                </div>

                <div class="card-body">
                  <h5 class="text">  الوسائل المشاركة في الحادث</h5>
                </div>

                <div class="col-sm-6"     >
                  <label for="part" class="form-label select-label" > الوسائل المشاركة في الحادث</label><br>
                  <select id="part" name="partId" class="select" th:field="*{parts}" multiple >
                    <option  th:each="p: ${parts}"
                             th:value="${p.Id}"
                             th:text="${p.name}"
                             th:selected="(${p.Id} == ${idParts})"

                    />
                  </select>

                </div>





                  <div class="card-body">
                    <h5 class="text">   الأطراف المتضررة في الحادث</h5>
                  </div>

                  <div class="table-responsive"  >

                    <table class="table"  id="tbl-blesses">
                      <thead>
                      <tr>
                        <th scope="col">ID </th>
                        <th scope="col">الإسم واللقب</th>
                        <th scope="col">ب.ت.و</th>
                        <th scope="col">الجنس</th>
                        <th scope="col">العمر</th>
                        <th scope="col">الحالة</th>
                        <th scope="col">الملاحظات</th>
                        <th scope="col">edit</th>
                        <th scope="col">submit</th>
                        <th scope="col">Delete</th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr th:each="blesse : ${blesses}">
                        <td  th:text="${blesse.blesseId}" th:value="blesseId" >ID</td>
                        <td  th:text="${blesse.firstname}" th:value="firstname" >الإسم واللقب</td>
                        <td th:text="${blesse.CIN}"th:value="CIN" >  CIN</td>
                        <td th:text="${blesse.sexe}"th:value="sexe"> sexe</td>
                        <td th:text="${blesse.age}" th:value="age" > age</td>
                        <td th:text="${blesse.EtatBlesse}" th:value="EtatBlesse" > etat blesse</td>
                        <td th:text="${blesse.Observation}" th:value="Observation" >observation </td>
                        <td>
                          <a th:href="@{PvAccidentnew/editbl/{pvAccinpvaccidId}/{blesseId}(blesseId=${blesse.blesseId})}" class="btn btn-warning" >edit <i class="fas fa-user-edit ml-2"></i></a></td>

                        <td> <div class="col-md-12">
                          <input type="submit" class="btn btn-primary" value="تحيين مصاب "/>
                        </div></td>


                        <td>
                          <a th:href="@{PvAccidentnew/deletebl/{blesseId}(blesseId=${blesse.blesseId})}" class="btn btn-danger" >delete<i class="fas fa-user-times ml-2"></i></a></td>

                      </tr>
                      </tbody>
                    </table>

                  </div>

                  <!-- Add rows button-->
                  <!--div >
                    <a class="btn btn-primary rounded-0 btn-block"  id="insertRow" >إضافة مصاب</a>
                  </div-->


                  <div>
                  <input type="submit" class="btn btn-primary" value="تسجيل محضر معاين حادث"/>
                </div>

                <p class="my-5" align="right">
                  <a th:href="@{'/PvAccidentnew/list1'}" class="btn btn-secondary" >

                    <i class="fas fa-solid fa-backward">الرجوع الى قائمة الحوادث</i></a>


                <div class="form-group col-md-8"></div>

              </div>
             </form>
        </div>
      </div>
    </div>

  </div>


  <div th:replace="fragments/footer :: footer" />


</main>






<!--   Core JS Files   -->
<script src="../assets/js/core/popper.min.js"></script>
<script src="../assets/js/core/bootstrap.min.js"></script>
<script src="../assets/js/plugins/perfect-scrollbar.min.js"></script>
<script src="../assets/js/plugins/smooth-scrollbar.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
<script src="../assets/js/bootstrap-select.min.js"></script>
<script src="../assets/js/plugins/choices.min.js"></script>

<script>
    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
        damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
  </script>



<!--script type="text/javascript">
    $('.ex-disable').click(function () {
  $('.disable-example').prop('disabled', true);
});

$('.ex-enable').click(function () {
  $('.disable-example').prop('disabled', false);
  $('.disable-example').selectpicker('refresh');
});
    </script-->




<script src="/assets/js/soft-ui-dashboard.min.js?v=1.0.3"></script>



<script>



$(function () {

    // Start counting from the third row
    var counter = 1;

    $("#insertRow").on("click", function (event) {
        event.preventDefault();

        var newRow = $("<tr>");
        var cols = '';

        // Table columns
        cols += '<td scrope="row">' + counter + '</td>';
		cols += '<td><input class="form-control rounded-0" type="text" name="firstname" placeholder="الإسم واللقب "></td>';

        cols += '<td><input class="form-control rounded-0" type="text" name="CIN" placeholder="رقم بطاقة  لاتعريف الوطنية"></td>';

		cols += '<td><select name="sexe" id="sexe"><option value="">--الجنس--</option>'
+		'<option value="998">ذكر</option>'+
'<option value="999">أنثى</option>'
		'</select></td>';

       cols += '<td><input class="form-control rounded-0" type="text" name="age" placeholder="السن"></td>';
		cols += '<td><select name="EtatBlesse" id="EtatBlesse"><option value="">--حالة المصاب--</option>'
+		'<option value="1000">إصابات طفيفة</option>'+
'<option value="1001">إصابات تستوجب تدخل طبي</option>'+
'<option value="1002">متوفى</option>'
		'</select></td>';

        cols += '<td><input class="form-control rounded-0" type="text" name=" Observation" placeholder=" ملاحظات"></td>';
        cols += '<td><button class="btn btn-danger rounded-0" id ="deleteRow"><i class="fa fa-trash"></i></button</td>';

        // Insert the columns inside a row
        newRow.append(cols);

        // Insert the row inside a table
        $("#tbl-blesses").append(newRow);

        // Increase counter after each row insertion
        counter++;
    });


    // Remove row when delete btn is clicked
    $("#tbl-blesses").on("click", "#deleteRow", function (event) {
        $(this).closest("tr").remove();
        counter -= 1
    });




});


</script>
<script>
  /*!
 DataTables Bootstrap 5 integration
 2020 SpryMedia Ltd - datatables.net/license
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var e=a.length,d=0;d<e;d++){var f=a[d];if(b.call(c,f,d,a))return{i:d,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};
$jscomp.polyfill=function(a,b,c,e){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,e):$jscomp.polyfillUnisolated(a,b,c,e))};$jscomp.polyfillUnisolated=function(a,b,c,e){c=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var d=a[e];if(!(d in c))return;c=c[d]}a=a[a.length-1];e=c[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,e){var d=a.split(".");a=1===d.length;e=d[0];e=!a&&e in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<d.length-1;f++){var l=d[f];if(!(l in e))return;e=e[l]}d=d[d.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?e[d]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,d,{configurable:!0,writable:!0,value:b}):b!==c&&($jscomp.propertyToPolyfillSymbol[d]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(d):$jscomp.POLYFILL_PREFIX+d,d=
$jscomp.propertyToPolyfillSymbol[d],$jscomp.defineProperty(e,d,{configurable:!0,writable:!0,value:b})))};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");
(function(a){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(b){return a(b,window,document)}):"object"===typeof exports?module.exports=function(b,c){b||(b=window);c&&c.fn.dataTable||(c=require("datatables.net")(b,c).$);return a(c,b,b.document)}:a(jQuery,window,document)})(function(a,b,c,e){var d=a.fn.dataTable;a.extend(!0,d.defaults,{dom:"<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",
renderer:"bootstrap"});a.extend(d.ext.classes,{sWrapper:"dataTables_wrapper dt-bootstrap5",sFilterInput:"form-control form-control-sm",sLengthSelect:"form-select form-select-sm",sProcessing:"dataTables_processing card",sPageButton:"paginate_button page-item"});d.ext.renderer.pageButton.bootstrap=function(f,l,A,B,m,t){var u=new d.Api(f),C=f.oClasses,n=f.oLanguage.oPaginate,D=f.oLanguage.oAria.paginate||{},h,k,v=0,y=function(q,w){var x,E=function(p){p.preventDefault();a(p.currentTarget).hasClass("disabled")||
u.page()==p.data.action||u.page(p.data.action).draw("page")};var r=0;for(x=w.length;r<x;r++){var g=w[r];if(Array.isArray(g))y(q,g);else{k=h="";switch(g){case "ellipsis":h="&#x2026;";k="disabled";break;case "first":h=n.sFirst;k=g+(0<m?"":" disabled");break;case "previous":h=n.sPrevious;k=g+(0<m?"":" disabled");break;case "next":h=n.sNext;k=g+(m<t-1?"":" disabled");break;case "last":h=n.sLast;k=g+(m<t-1?"":" disabled");break;default:h=g+1,k=m===g?"active":""}if(h){var F=a("<li>",{"class":C.sPageButton+
" "+k,id:0===A&&"string"===typeof g?f.sTableId+"_"+g:null}).append(a("<a>",{href:"#","aria-controls":f.sTableId,"aria-label":D[g],"data-dt-idx":v,tabindex:f.iTabIndex,"class":"page-link"}).html(h)).appendTo(q);f.oApi._fnBindAction(F,{action:g},E);v++}}}};try{var z=a(l).find(c.activeElement).data("dt-idx")}catch(q){}y(a(l).empty().html('<ul class="pagination"/>').children("ul"),B);z!==e&&a(l).find("[data-dt-idx="+z+"]").trigger("focus")};return d});

</script>
-->
</body>

</html>