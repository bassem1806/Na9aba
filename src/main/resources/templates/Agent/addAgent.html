<!DOCTYPE html>
<html dir="rtl" lang="ar" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <link href="/assets/img/apple-icon.png" rel="apple-touch-icon" sizes="76x76">
    <link href="/assets/img/favicon.png" rel="icon" type="image/png">
    <title>
        إدارة الخدمات الفنية
    </title>
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet"/>
    <!-- Nucleo Icons -->
    <link href="/assets/css/nucleo-icons.css" rel="stylesheet"/>
    <link href="/assets/css/nucleo-svg.css" rel="stylesheet"/>
    <!-- Font Awesome Icons -->
    <script crossorigin="anonymous" src="https://kit.fontawesome.com/42d5adcbca.js"></script>
    <link href="/assets/css/nucleo-svg.css" rel="stylesheet"/>
    <!-- CSS Files -->
    <link href="/assets/css/soft-ui-dashboard.css?v=1.0.3" id="pagestyle" rel="stylesheet"/>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <script src="//cdn.jsdelivr.net/npm/sweetalert2011"></script>
    <script src="/assets/js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript">
$(document).ready(function(){

	$('#gouvernorat').on('change', function(){
		var gouvernorat_id = $(this).val();

		$.ajax({
			type: 'GET',
			url:'/Agent/loadDelegationByGouvernorat/' + gouvernorat_id,
				success: function(result) {
				var result = JSON.parse(result);
				var s = '<option value="">--من فضل إختر  المعتمدية--</option>';
				for(var i = 0; i < result.length; i++) {
					s += '<option value="' + result[i].delegationId + '">' + result[i].name + '</option>';
				}
				$('#gouvernorat1').empty();
				$('#gouvernorat1').html(s);
			}
		});
	});
		});

    </script>
    <script type="text/javascript">
$(document).ready(function(){

	$('#listDirectionGeneral').on('change', function(){
		var direction_general_id= $(this).val();
console.log("Hello world! 1f");
		$.ajax({
			type: 'GET',
			url: '/Agent/loadDirectionByDirectionGeneral/' + direction_general_id ,
			success: function(result) {
				var result = JSON.parse(result);
				var s = '';
				for(var i = 0; i < result.length; i++) {
					s += '<option value="' + result[i].DId + '">' + result[i].NomDir + '</option>';
				}

				$('#listDirection').html(s);
			}
		});
	});
		});

    </script>

    <script type="text/javascript">
$(document).ready(function(){

	$('#listDirection').on('change', function(){
		var direction_id= $(this).val();
		console.log("Hello world 2eme code");
console.log("Hello world!  3 eme etape");
		$.ajax({
			type: 'GET',
			url: '/Agent/loadSousDirectionByDirection/' + direction_id ,
			success: function(result) {
			console.log("Hello world!  4 eme etape");
				var result = JSON.parse(result);
			console.log("Hello world!  5 eme etape" +result);
				var s = '';
				for(var i = 0; i < result.length; i++) {
				console.log("Hello world!  6 eme etape");
					s += '<option value="' + result[i].sdId + '">' + result[i].nomSDir + '</option>';
console.log("Hello world!  7 eme etape");
				}

				$('#listSousDirection').html(s);
				console.log("Hello world!  8eme etape");
			}
		});
	});
		});
    </script>

    <script>
function controle(){
var saisie =document.getElementById("CNRPS").value;
alert("Vous avez saisi : "+ saisie);
console.log( "alert:" +saisie);

const cnrps = saisie;
console.log(cnrps.substring(0, 8));
const cnrps1=(cnrps.substring(0, 8))
console.log("cnrps.substring :"+cnrps);
console.log("cnrps1:" +cnrps1);
const cnrps2=(cnrps.substring(8, 10))
console.log("cnrps2:" +cnrps2);
const result = cnrps1 % 97;
console.log("modulo97:" +result);

if (cnrps2 == result) {
  alert("CNRPS Exacte : "+ saisie);
} else {
  alert("Merci de verifier le CNRPS : "+ saisie);
}

}

function myFunction() {
  var x = document.getElementById("myDIV");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}


</script>
    <style>
#myDIV {

  display:none;
}
</style>

</head>

<!-- menu a droite  -->

<body class="g-sidenav-show rtl bg-gray-100">
<aside class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-end me-3 rotate-caret"
       id="sidenav-main">

    <div th:replace="fragments/menu :: menu"/>

</aside>
<!--end  menu a droite  -->

<main class="main-content position-relative max-height-vh-100 h-100 mt-1 border-radius-lg overflow-hidden">


    <!-- Navbar header  -->
    <div th:replace="fragments/header :: header"/>

    <div class="container my-5">
        <!--h3>إضافة موظف</h3-->
        <div class="card">
            <div class="card-body">
                <div class="col-md-12">

                    <div class="card-header pb-0 text-left bg-transparent">
                        <h3 class="font-weight-bolder text-info text-center"> ملف موظف </h3>

                    </div>

                    <div class="form-group col-md-3">
                        <label class="col-form-label" for="CNRPS">المعرف الوحيد </label>
                        <input class="form-control" id="CNRPS" placeholder="المعرف الوحيد" name="CNRPS" type="text"/>
                        <!--input type="button"  class="btn btn-danger" id="bouton" value="التثبت من م.و قبل المواصلة" onclick="controle()"-->

                    </div>

                    <input type="button"  class="btn btn-danger" id="btn1" value="التثبت من م.و قبل المواصلة" onclick="controle()">
                    <input type="button"  class="btn btn-info" id="btn2" value=" المواصلة" onclick="myFunction()">



                    <form action="#" method="post" th:action="@{/Agent/addSave}" th:object="${agent}" id="myDIV">
                        <div class="row">

                            <!--div class="card-header pb-0 text-left bg-transparent">
                                <h3 class="font-weight-bolder text-info text-center"> ملف موظف </h3>

                            </div-->


                            <div class="form-group col-md-3">
                                <label class="col-form-label" for="CNRPS">المعرف الوحيد </label>
                                <input class="form-control" id="CNRPS" placeholder="المعرف الوحيد" name="CNRPS"  th:field="*{CNRPS}"
                                       type="text"/>


                                <span class="text-danger" th:errors="*{CNRPS}"
                                      th:if="${#fields.hasErrors('CNRPS')}"></span>
                            </div>

                            <div class="form-group col-md-3"   >
                                <label class="col-form-label" for="CIN">رقم بطاقة التعريف الوطنية </label>
                                <input class="form-control" id="CIN" placeholder="رقم بطاقة التعريف الوطنية " th:field="*{CIN}"
                                       type="text"/>
                                <span class="text-danger" th:errors="*{CIN}" th:if="${#fields.hasErrors('CIN')}"></span>
                            </div>
                            <br>

                            <div class="form-group col-md-4" >
                                <label class="col-form-label" for="Prenom">الإسم </label>
                                <input class="form-control" id="Prenom" placeholder="الإسم " th:field="*{Prenom}"
                                       type="text"/>
                                <span class="text-danger" th:errors="*{Prenom}"
                                      th:if="${#fields.hasErrors('Prenom')}"></span>
                            </div>
                            <div class="form-group col-md-3" >
                                <label class="col-form-label" for="Nom">اللقب </label>
                                <input class="form-control" id="Nom" placeholder="اللقب " th:field="*{Nom}"
                                       type="text"/>
                                <span class="text-danger" th:errors="*{Nom}" th:if="${#fields.hasErrors('Nom')}"></span>
                            </div>
                            <div class="form-group col-md-3" >
                                <label class="col-form-label" for="Prenom_Pere">إسم الأب </label>
                                <input class="form-control" id="Prenom_Pere" placeholder="إسم الأب " th:field="*{Prenom_Pere}"
                                       type="text"/>
                                <span class="text-danger" th:errors="*{Prenom_Pere}"
                                      th:if="${#fields.hasErrors('Prenom_Pere')}"></span>
                            </div>

                            <div class="col-sm-3" >
                                <label class="col-form-label" for="gouvernorat">الولاية</label>

                                <select class="form-control" id="gouvernorat" name="gouvernoratId">
                                    <option value="">--من فضل إختر الولاية--</option>
                                    <option th:data="${gv.gouvernoratId}" th:each="gv: ${gouvernorat}"
                                            th:text="${gv.name}" th:value="${gv.gouvernoratId}"/>
                                </select>

                            </div>


                            <div class="col-sm-3" >
                                <label class="col-form-label" for="gouvernorat1">المعتمدية</label>

                                <select class="form-control" id="gouvernorat1" name="gouvernoratId1">
                                    <option value="">--من فضل إختر المعتمدية--</option>
                                </select>

                            </div>


                            <div class="form-group col-md-4" >
                                <label class="col-form-label" for="directionGeneral" id="directionGeneral">الإدارة
                                    العامة </label>
                                <select class="form-control" id="listDirectionGeneral" name="DirectionGeneralId">
                                    <option value="">--من فضل إختر الإدارة العامة--</option>
                                    <option th:each="dr: ${directionGenerals}" th:text="${dr.NomDirGen}"
                                            th:value="${dr.DgId}"/>
                                </select>
                            </div>


                            <div class="form-group col-md-4" >
                                <label class="col-form-label" for="direction" id="direction">الإدارة </label>
                                <select class="form-control" id="listDirection" name="DirectionId">

                                    <option value="">--من فضل إختر الإدارة --</option>
                                    <option th:each="d: ${direction}" th:text="${d.NomDir}" th:value="${d.DId}"/>
                                </select>
                            </div>

                            <div class="form-group col-md-4" >
                                <label class="col-form-label" for="sousDirection" id="sousDirection">الإدارةالفرعية </label>
                                <select class="form-control" id="listSousDirection"   name="SousDirectionId">
                                    <option value="">--من فضل إختر الإدارةالفرعية --</option>
                                    <option th:each="sd: ${sousDirection }" th:text="${sd.nomSDir}" th:value="${sd.sdId}"/>
                                </select>
                            </div>

                            <div class="form-group col-md-4">
                                <label class="col-form-label" for="grade" id="grade1">الرتبة </label>
                                <select class="form-control" id="grade" name="GradeId">
                                    <option value="">--من فضل إختر الرتبة --</option>
                                    <option th:each="gr: ${grades}" th:text="${gr.LibelleGrade}" th:value="${gr.GradeId}"/>
                                </select>
                            </div>

                            <div class="form-group col-md-4" >
                                <label class="col-form-label" for="syndicat" id="syndicat1">النقابة </label>
                                <select class="form-control" id="syndicat" name="SyndicatId">
                                    <option value="">--من فضل إختر النقابة --</option>
                                    <option th:each="sy: ${syndicat}" th:text="${sy.NomSyndicat}"
                                            th:value="${sy.SynId}"/>
                                </select>
                            </div>


                            <div class="form-group col-md-3" >
                                <label class="col-form-label" for="DateInscription">date</label>
                                <input class="form-control" id="DateInscription" placeholder="date" th:field="*{DateInscription}"
                                       type="date"/>
                                <span class="text-danger" th:errors="*{DateInscription}" th:if="${#fields.hasErrors('DateInscription')}"></span>
                            </div>


                            <div class="col-md-6" id="ex1" >
                                <input class="btn btn-primary" type="submit" value="إضافة موظف ">
                            </div>
    <!--/div-->

                            <div class="form-group col-md-8">

                            </div>


                        </div>
                    </form>


                </div>
            </div>
        </div>
    </div>


    <!-- Navbar footer  -->
    <div th:replace="fragments/footer :: footer"/>


    </div>
</main>
<div class="fixed-plugin">
    <a class="fixed-plugin-button text-dark position-fixed px-3 py-2">
        <i class="fa fa-cog py-2"> </i>
    </a>
    <div class="card shadow-lg ">
        <div class="card-header pb-0 pt-3 ">
            <div class="float-end">
                <h5 class="mt-3 mb-0">Soft UI Configurator</h5>
                <p>See our dashboard options.</p>
            </div>
            <div class="float-start mt-4">
                <button class="btn btn-link text-dark p-0 fixed-plugin-close-button">
                    <i class="fa fa-close"></i>
                </button>
            </div>
            <!-- End Toggle Button -->
        </div>
        <hr class="horizontal dark my-1">
        <div class="card-body pt-sm-3 pt-0">
            <!-- Sidebar Backgrounds -->
            <div>
                <h6 class="mb-0">Sidebar Colors</h6>
            </div>
            <a class="switch-trigger background-color" href="javascript:void(0)">
                <div class="badge-colors my-2 text-end">
                    <span class="badge filter bg-gradient-primary active" data-color="primary"
                          onclick="sidebarColor(this)"></span>
                    <span class="badge filter bg-gradient-dark" data-color="dark" onclick="sidebarColor(this)"></span>
                    <span class="badge filter bg-gradient-info" data-color="info" onclick="sidebarColor(this)"></span>
                    <span class="badge filter bg-gradient-success" data-color="success"
                          onclick="sidebarColor(this)"></span>
                    <span class="badge filter bg-gradient-warning" data-color="warning"
                          onclick="sidebarColor(this)"></span>
                    <span class="badge filter bg-gradient-danger" data-color="danger"
                          onclick="sidebarColor(this)"></span>
                </div>
            </a>


            <!--   Core JS Files   -->
            <script src="/assets/js/sweetalert2.all.min.js"></script>
            <script src="/assets/js/core/popper.min.js"></script>
            <script src="/assets/js/core/bootstrap.min.js"></script>
            <script src="/assets/js/plugins/perfect-scrollbar.min.js"></script>
            <script src="/assets/js/plugins/smooth-scrollbar.min.js"></script>
            <script src="/assets/js/plugins/choices.min.js"></script>

            <!-- Github buttons -->
            <script async defer src="https://buttons.github.io/buttons.js"></script>
            <!-- Control Center for Soft Dashboard: parallax effects, scripts for the example pages etc -->
            <script src="/assets/js/soft-ui-dashboard.min.js?v=1.0.3"></script>
</body>

</html>